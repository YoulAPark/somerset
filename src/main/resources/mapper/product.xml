<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace = "com.ouneno.mybook.service.order.ProductDao">

	<resultMap id="productMapper" type="product">
		<result property="prodNo" 			column="PROD_NO" 		jdbcType="NUMERIC"/>
		<result property="prodName"			column="PROD_NAME" 		jdbcType="VARCHAR" />
		<result property="prodDetail" 		column="PROD_DETAIL" 	jdbcType="VARCHAR" /> 
		<result property="prodPrice" 		column="PROD_PRICE" 	jdbcType="NUMERIC" /> 
		<result property="prodHotAndIce" 	column="PROD_HOTANDICE" jdbcType="VARCHAR" /> 
		<result property="prodSize" 		column="PROD_SIZE" 		jdbcType="VARCHAR" /> 
		<result property="prodCup" 			column="PROD_CUP" 		jdbcType="VARCHAR" />
		<result property="prodSyrup" 		column="PROD_SHOT" 		jdbcType="VARCHAR" />  
		<result property="prodShot" 		column="PROD_SHOT" 		jdbcType="NUMERIC" /> 
		<result property="prodWhip" 		column="PROD_WHIP" 		jdbcType="VARCHAR" /> 
		<result property="prodMilk" 		column="PROD_MILK" 		jdbcType="VARCHAR" /> 
	</resultMap>
	
	<!-- 게시판 목록 조회 (상품번호, 상품명, 상품설명, 상품가격)-->
	<select id="getProduct"		parameterType="product"  resultType="hashMap">	
		SELECT 
				PROD_NO
			, PROD_NAME
			, PROD_DETAIL
			, PROD_PRICE 
		FROM product
		ORDER BY PROD_NO
	</select>
	
	<!-- 2 -->
	<select id="getProductList"	parameterType="int" resultMap="productMapper">	
		SELECT 
				PROD_NO
			, PROD_NAME
			, PROD_DETAIL
			, PROD_PRICE 
		FROM product
		WHERE PROD_NO = #{prodNo}
	</select>
	
	<!-- 복습 : listProduct에서 수정버튼 클릭 후 수정할 것들을 입력하여 수정처리 하는 것 -->
	<!-- 그러기 위해선 우선 수정버튼을 눌렀을 때, 상품들이 떠야 함 -->
	<select id="getProductList2" 	parameterType="int" 	resultMap="productMapper">
		SELECT
				PROD_NO
			,	PROD_NAME
			,	PROD_DETAIL
			, 	PROD_PRICE
		FROM product
		WHERE PROD_NO = #{prodNo}	
	</select>
	<!--  parameterType이 int인 이유 : WHERE 조건절에서 조건을 줄 PROD_NO가 INT의 성향을 띄고 있기 때문에 -->
	 
	<!-- [완료_20220830] 상품추가 -->
	<select id="addProduct"		parameterType="product">	
		INSERT INTO
			product ( PROD_NO, PROD_NAME, PROD_DETAIL, PROD_PRICE )
		VALUES
					( #{prodNo}, #{prodName}, #{prodDetail}, #{prodPrice} )
	</select>
	
	<!-- 상품수정 -->
	<update id="updateProduct"	parameterType="int">
		UPDATE 
			product
		<set>
			PROD_NAME = #{prodName},
			PROD_DETAIL = #{prodDetail},
			PROD_PRICE = #{prodPrice}			
		</set> 
		WHERE PROD_NO = #{prodNo}
	</update>
	
	<!-- 
	<delete id="deleteProduct" parameterType="int">
		DELETE
		FROM 
			product
		WHERE
			PROD_NO = {#prodNo}
	</delete> 
	-->
	
	</mapper>